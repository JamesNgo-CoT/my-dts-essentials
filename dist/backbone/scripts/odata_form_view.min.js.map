{"version":3,"sources":["backbone/scripts/odata_form_view.min.js"],"names":["ODataFormView","Backbone","View","extend","doCancel","e","confirm","preventDefault","doSave","this","$el","find","submit","events","click .btn-cancel","click .btn-save","sections","rows","fields","bindto","id","required","title","type","render","_this","options","arguments","length","undefined","console","log","html","template","model","toJSON","form","CotForm","cid","rootPath","_","result","success","save","then","alert","useBinding","setModel","target","Promise","resolve"],"mappings":"AAAA,aAKA,IAAIA,cAAgBC,SAASC,KAAKC,OAAO,CACvCC,SAAU,SAAkBC,GAC1B,IAAKC,QAAQ,gEAEX,OADAD,EAAEE,kBACK,GAIXC,OAAQ,SAAgBH,GACtBA,EAAEE,iBACFE,KAAKC,IAAIC,KAAK,QAAQC,UAGxBC,OAAQ,CACNC,oBAAqB,WACrBC,kBAAmB,UAGrBC,SAAU,CAAC,CACTC,KAAM,CAAC,CACLC,OAAQ,CAAC,CACPC,OAAQ,KACRC,GAAI,KACJC,UAAU,EACVC,MAAO,KACPC,KAAM,aAKZC,OAAQ,WACN,IAAIC,EAAQhB,KAERiB,EAA6B,EAAnBC,UAAUC,aAA+BC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAElFG,QAAQC,IAAI,0BAEZtB,KAAKC,IAAIsB,KAAKvB,KAAKwB,SAAS,CAAEC,MAAOzB,KAAKyB,MAAMC,YAEhD,IAAIC,EAAO,IAAIC,QAAQ,CACrBjB,GAAI,QAAUX,KAAKyB,MAAMI,IACzBC,SAAUC,EAAEC,OAAOhC,KAAM,YACzBiC,QAAS,SAAiBrC,GAKxB,OAJAA,EAAEE,iBACFkB,EAAMS,MAAMS,OAAOC,KAAKlB,EAAQgB,SAAW,WACzC,OAAOG,MAAM,aAER,GAETC,YAAY,EACZ9B,SAAUwB,EAAEC,OAAOhC,KAAM,cAQ3B,OALA2B,EAAKW,SAAStC,KAAKyB,OACnBE,EAAKZ,OAAO,CACVwB,OAAQvC,KAAKC,IAAIC,KAAK,eAGjBsC,QAAQC,WAGjBX,SAAU,wBAEVN,SAAUO,EAAEP,SAAS","file":"odata_form_view.min.js","sourcesContent":["'use strict';\n\n/* global _ Backbone CotForm */\n\n/* exported ODataFormView */\nvar ODataFormView = Backbone.View.extend({\n  doCancel: function doCancel(e) {\n    if (!confirm('Any changes made will not be saved. Do you want to continue?')) {\n      e.preventDefault();\n      return false;\n    }\n  },\n\n  doSave: function doSave(e) {\n    e.preventDefault();\n    this.$el.find('form').submit();\n  },\n\n  events: {\n    'click .btn-cancel': 'doCancel',\n    'click .btn-save': 'doSave'\n  },\n\n  sections: [{\n    rows: [{\n      fields: [{\n        bindto: 'id',\n        id: 'id',\n        required: true,\n        title: 'ID',\n        type: 'text'\n      }]\n    }]\n  }],\n\n  render: function render() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    console.log('ODATA FORM VIEW RENDER');\n\n    this.$el.html(this.template({ model: this.model.toJSON() }));\n\n    var form = new CotForm({\n      id: 'form_' + this.model.cid,\n      rootPath: _.result(this, 'rootPath'),\n      success: function success(e) {\n        e.preventDefault();\n        _this.model.save().then(options.success || function () {\n          return alert('Saved!');\n        });\n        return false;\n      },\n      useBinding: true,\n      sections: _.result(this, 'sections')\n    });\n\n    form.setModel(this.model);\n    form.render({\n      target: this.$el.find('.cot-form')\n    });\n\n    return Promise.resolve();\n  },\n\n  rootPath: '/* @echo SRC_PATH *//',\n\n  template: _.template('\\n    <div class=\"hidden-print\">\\n      <a href=\"#\" class=\"btn btn-default btn-cancel\">Cancel</a>\\n      <button type=\"button\" class=\"btn btn-default btn-save\">Save</button>\\n    </div>\\n\\n    <div class=\"cot-form\"></div>\\n\\n    <div class=\"hidden-print\">\\n      <a href=\"#\" class=\"btn btn-default btn-cancel\">Cancel</a>\\n      <button type=\"button\" class=\"btn btn-default btn-save\">Save</button>\\n    </div>\\n  ')\n});"]}