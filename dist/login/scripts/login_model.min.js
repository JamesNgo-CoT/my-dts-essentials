"use strict";var LoginModel=Backbone.Model.extend({cotLogin:null,checkLogin:function(){var o=this;return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).serverSide?new Promise(function(n,t){o.cotLogin.session.isLoggedIn(function(o){o===CotSession.LOGIN_CHECK_RESULT_TRUE?n():t()})}):this.cotLogin.isLoggedIn()?Promise.resolve():Promise.reject()},requireLogin:function(o){var n=this;return Promise.resolve().then(function(){return n.checkLogin(o)}).catch(function(){return n.showLogin(o)}).catch(function(){return n.cotLogin.logout(),Promise.reject()})},showLogin:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.cotLogin.modal&&this.cotLogin.modal.modal("hide"),new Promise(function(o,n){t.cotLogin.modal=cot_app.showModal({title:"User Login",body:"\n          "+t.cotLogin.options.loginMessage+'\n          <form>\n            <div class="form-group">\n              <label for="cot_login_username">Username</label>:\n              <input class="form-control" id="cot_login_username">\n            </div>\n            <div class="form-group">\n              <label for="cot_login_password">Password</label>:\n              <input class="form-control" type="password" id="cot_login_password">\n            </div>\n          </form>\n        ',footerButtonsHtml:'\n          <button class="btn btn-success" type="button" data-dismiss="modal">Cancel</button>\n          <button class="btn btn-success btn-cot-login" type="button">Login</button>\n        ',originatingElement:i.$originatingElement||$(t.cotLogin.options.welcomeSelector).find("a.login"),className:"cot-login-modal",onShown:function(){t.cotLogin.modal.find(".btn-cot-login").click(function(){t.cotLogin._login()}),t.cotLogin.modal.find(".modal-body input").keydown(function(o){13===(o.charCode||o.keyCode||0)&&t.cotLogin._login()})},onHidden:function(){t.checkLogin(i).then(function(){o()},function(){n()})}})})},initialize:function(o,n){var t=this;this.cotLogin=new cot_login($.extend(n,{onLogin:function(o){t.set(o)}}))}});
//# sourceMappingURL=login_model.min.js.map
