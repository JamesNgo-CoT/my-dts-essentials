"use strict";var _createClass=function(){function e(n,o){for(var t=0;t<o.length;t++){var e=o[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}();function _classCallCheck(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(n,o){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?n:o}function _inherits(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(n,o):n.__proto__=o)}var cot_login_ext=function(n){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,cot_login),_createClass(o,[{key:"checkLogin",value:function(){var n=this;return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).serverSide?new Promise(function(o,t){n.session.isLoggedIn(function(n){n===CotSession.LOGIN_CHECK_RESULT_TRUE?o():t()})}):this.session.isLoggedIn()?Promise.resolve():Promise.reject()}},{key:"requireLogin",value:function(n){var o=this;return Promise.resolve().then(function(){return o.checkLogin(n)}).catch(function(){return o.showLogin(n)}).catch(function(){return o.logout(),Promise.reject()})}},{key:"showLogin",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.modal&&this.modal.modal("hide"),new Promise(function(n,o){t.modal=cot_app.showModal({title:"User Login",body:"\n          "+t.options.loginMessage+'\n          <form>\n            <div class="form-group">\n              <label for="cot_login_username">Username</label>:\n              <input class="form-control" id="cot_login_username">\n            </div>\n            <div class="form-group">\n              <label for="cot_login_password">Password</label>:\n              <input class="form-control" type="password" id="cot_login_password">\n            </div>\n          </form>\n        ',footerButtonsHtml:'\n          <button class="btn btn-success" type="button" data-dismiss="modal">Cancel</button>\n          <button class="btn btn-success btn-cot-login" type="button">Login</button>\n        ',originatingElement:e.$originatingElement||$(t.options.welcomeSelector).find("a.login"),className:"cot-login-modal",onShown:function(){t.modal.find(".btn-cot-login").click(function(){t._login()}),t.modal.find(".modal-body input").keydown(function(n){13===(n.charCode||n.keyCode||0)&&t._login()})},onHidden:function(){t.checkLogin(e).then(function(){n()},function(){o()})}})})}}]),o}();
//# sourceMappingURL=cot_login_ext.min.js.map
