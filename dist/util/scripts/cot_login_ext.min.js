"use strict";CotSession.prototype.isLoggedIn=function(n){var r=this;if(!n)return!!this._cookie("sid")||(this.logout(),!1);var e=this.sid||this._cookie("sid");if(e){var i=""+this.options.ccApiOrigin+this.options.ccApiPath+this.options.ccApiEndpoint;-1!==i.indexOf("/cc_sr_admin_v1/session")?i=i+"/"+e:-1!==i.indexOf("/c3api_auth/auth")?i=i+"/"+e:-1!==i.indexOf("/c3api_auth/v2/AuthService.svc/AuthSet")&&(i=i+"('"+e+"')"),$.get(i).done(function(i){var s=i.app||"",o=i.sid||"",t=i.error||"";s===r.options.appName&&o===e?(r._storeLogin(i),n(CotSession.LOGIN_CHECK_RESULT_TRUE)):"no_such_session"===t?(r.logout(),n(CotSession.LOGIN_CHECK_RESULT_FALSE)):n(CotSession.LOGIN_CHECK_RESULT_INDETERMINATE)}).fail(function(){n(CotSession.LOGIN_CHECK_RESULT_INDETERMINATE)})}else n(CotSession.LOGIN_CHECK_RESULT_FALSE)},CotSession.prototype.login=function(t){var s=this;t=$.extend({username:"",password:"",success:function(){},error:function(i,s,o){},always:function(){}},t);var i={app:this.options.appName,user:t.username,pwd:t.password},o={method:"POST",url:""+this.options.ccApiOrigin+this.options.ccApiPath+this.options.ccApiEndpoint};-1!==o.url.indexOf("/cc_sr_admin_v1/session")?(o.url=o.url+"?app="+i.app,o.data=i):-1!==o.url.indexOf("/c3api_auth/auth")?(o.url=o.url+"?app="+i.app,o.data=i):-1!==o.url.indexOf("/c3api_auth/v2/AuthService.svc/AuthSet")&&(o.contentType="application/json",o.data=JSON.stringify(i)),$.ajax(o).done(function(i){i.error?t.error(null,"invalid_user_or_pwd"===i.error?"Invalid username or password":"Login failed",i.error):i.passwordIsExpired?t.error(null,"Expired password","passwordIsExpired"):(s._storeLogin(i),t.success())}).fail(function(i,s,o){t.error(i,s,o)}).always(function(){t.always()})};
//# sourceMappingURL=cot_login_ext.min.js.map
