"use strict";CotSession.prototype.isLoggedIn=function(t){var e=this;if(!t)return!!this._cookie("sid")||(this.logout(),!1);var r=this.sid||this._cookie("sid");if(r){var i=""+this.options.ccApiOrigin+this.options.ccApiPath+this.options.ccApiEndpoint;-1!==i.indexOf("/cc_sr_admin_v1/session")?i=i+"/"+r:-1!==i.indexOf("/c3api_auth/auth")?i=i+"('"+r+"')":-1!==i.indexOf("/c3api_auth/v2/AuthService.svc/AuthSet")&&(i=i+"('"+r+"')"),$.get(i).done(function(i){var s=i.app||"",o=i.sid||"",n=i.error||"";s===e.options.appName&&o===r?(e._storeLogin(i),t(CotSession.LOGIN_CHECK_RESULT_TRUE)):"no_such_session"===n?(e.logout(),t(CotSession.LOGIN_CHECK_RESULT_FALSE)):t(CotSession.LOGIN_CHECK_RESULT_INDETERMINATE)}).fail(function(){t(CotSession.LOGIN_CHECK_RESULT_INDETERMINATE)})}else t(CotSession.LOGIN_CHECK_RESULT_FALSE)},CotSession.prototype.login=function(n){var s=this;n=$.extend({username:"",password:"",success:function(){},error:function(i,s,o){},always:function(){}},n);var i={app:this.options.appName,user:n.username,pwd:n.password},o={method:"POST",url:""+this.options.ccApiOrigin+this.options.ccApiPath+this.options.ccApiEndpoint};-1!==o.url.indexOf("/cc_sr_admin_v1/session")?(o.url=o.url+"?app="+i.app,o.data=i):-1!==o.url.indexOf("/c3api_auth/auth")?(o.contentType="application/json",o.data=JSON.stringify(i)):-1!==o.url.indexOf("/c3api_auth/v2/AuthService.svc/AuthSet")&&(o.contentType="application/json",o.data=JSON.stringify(i)),$.ajax(o).done(function(i){i.error?n.error(null,"invalid_user_or_pwd"===i.error?"Invalid username or password":"Login failed",i.error):i.passwordIsExpired?n.error(null,"Expired password","passwordIsExpired"):(s._storeLogin(i),n.success())}).fail(function(i,s,o){n.error(i,s,o)}).always(function(){n.always()})};
//# sourceMappingURL=cot_login_ext.min.js.map
