"use strict";CotSession.prototype.isLoggedIn=function(n){var r=this;if(!n)return!!this._cookie("sid")||(this.logout(),!1);var e=this.sid||this._cookie("sid");if(e){var o=""+this.options.ccApiOrigin+this.options.ccApiPath+this.options.ccApiEndpoint;o=-1!==o.indexOf("/c3api_auth/v2/AuthService.svc/AuthSet")?o+"('"+e+"')":o+"/"+e,$.get(o).done(function(o){var i=o.app||"",s=o.sid||"",t=o.error||"";i===r.options.appName&&s===e?(r._storeLogin(o),n(CotSession.LOGIN_CHECK_RESULT_TRUE)):"no_such_session"===t?(r.logout(),n(CotSession.LOGIN_CHECK_RESULT_FALSE)):n(CotSession.LOGIN_CHECK_RESULT_INDETERMINATE)}).fail(function(){n(CotSession.LOGIN_CHECK_RESULT_INDETERMINATE)})}else n(CotSession.LOGIN_CHECK_RESULT_FALSE)},CotSession.prototype.login=function(t){var i=this;t=$.extend({username:"",password:"",success:function(){},error:function(o,i,s){},always:function(){}},t);var o={app:this.options.appName,user:t.username,pwd:t.password},s={method:"POST",url:""+this.options.ccApiOrigin+this.options.ccApiPath+this.options.ccApiEndpoint};-1!==s.url.indexOf("/c3api_auth/v2/AuthService.svc/AuthSet")?(s.contentType="application/json",s.data=JSON.stringify(o)):s.data=o,$.ajax(s).done(function(o){o.error?t.error(null,"invalid_user_or_pwd"===o.error?"Invalid username or password":"Login failed",o.error):o.passwordIsExpired?t.error(null,"Expired password","passwordIsExpired"):(i._storeLogin(o),t.success())}).fail(function(o,i,s){t.error(o,i,s)}).always(function(){t.always()})};
//# sourceMappingURL=cot_login_ext.min.js.map
