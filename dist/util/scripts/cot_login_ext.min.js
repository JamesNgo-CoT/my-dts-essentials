"use strict";CotSession.prototype.isLoggedIn=function(t){var r=this;if(!t)return!!this._cookie("sid")||(this.logout(),!1);var e=this.sid||this._cookie("sid");if(e){var s=""+this.options.ccApiOrigin+this.options.ccApiPath+this.options.ccApiEndpoint;s+=-1===s.indexOf("/cc_sr_admin_v1/session")?"('"+e+"')":"/"+e,$.get(s).done(function(s){var o=s.app||"",i=s.sid||"",n=s.error||"";o===r.options.appName&&i===e?(r._storeLogin(s),t(CotSession.LOGIN_CHECK_RESULT_TRUE)):"no_such_session"===n?(r.logout(),t(CotSession.LOGIN_CHECK_RESULT_FALSE)):t(CotSession.LOGIN_CHECK_RESULT_INDETERMINATE)}).fail(function(){t(CotSession.LOGIN_CHECK_RESULT_INDETERMINATE)})}else t(CotSession.LOGIN_CHECK_RESULT_FALSE)},CotSession.prototype.login=function(n){var o=this;n=$.extend({username:"",password:"",success:function(){},error:function(s,o,i){},always:function(){}},n);var s={app:this.options.appName,user:n.username,pwd:n.password},i=""+this.options.ccApiOrigin+this.options.ccApiPath+this.options.ccApiEndpoint,t=-1!==(i+=-1===i.indexOf("/cc_sr_admin_v1/session")?"":"?app="+this.options.appName).indexOf("/cc_sr_admin_v1/session")?{data:s,method:"POST"}:{contentType:"application/json",data:JSON.stringify(s),method:"POST"};t.url=i,$.ajax(t).done(function(s){s.error?n.error(null,"invalid_user_or_pwd"===s.error?"Invalid username or password":"Login failed",s.error):s.passwordIsExpired?n.error(null,"Expired password","passwordIsExpired"):(o._storeLogin(s),n.success())}).fail(function(s,o,i){n.error(s,o,i)}).always(function(){n.always()})};
//# sourceMappingURL=cot_login_ext.min.js.map
